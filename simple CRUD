VIEW
-------------------------------------------------------------------------------------------------
1.welcome.blade.php
    <!doctype html>
    <html >
        <head>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1">

            <link rel="stylesheet" href="/css/style.css"/>
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.js"></script>  
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/additional-methods.min.js"></script>

            <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
            <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

            <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
            <link href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet">
            <meta name="csrf-token" content="{{ csrf_token() }}" />
        </head>
        <body>
        </body>
    </html>
    
 2.employee.blade.php
 
 @include('welcome')
<div class="container">
    <div class="row">
        <div class="col-lg-4">
            <div class="card">
                <div class="card-header">Create Employee</div>
                <form id="employee_form">
                    <div class="card-body">
                        <div class="form-group" id="name_group">
                            <label>Name:</label>
                            <input type="text" name="name" id="name" class="form-control" placeholder="Name">
                        </div>
                        <div class="form-group" id="email_group">
                            <label>Email:</label>
                            <input type="text" name="email" id="email" class="form-control" placeholder="Email">
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="form-group">
                            <input type="hidden" name="employee_id" id="employee_id">
                            <button id="saveBtn" class="btn btn-primary btn-sm btn-submit">Submit</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="col-lg-8">
            <div class="form-group">
                <input type="text" name="search" id="search" class="form-control" placeholder="Search...." />
            </div>
            <table id="employeeTable" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</div>



<script>
$(document).ready(function(){
  
    $('.card-header').html("Create Employee");
    $('#saveBtn').html("Submit");
    $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
    });

//...........submitting the employee form..........................
    $('#employee_form').on('submit', function(event){
        event.preventDefault();
        var emailexits=false;
        var name =$("#name").val();
        var email =$("#email").val();       
        $(".error_msg").remove();

        var flag =0;
        if(name == "")
        {
            flag =1;
            $("#name_group").append("<span class='error_msg'>Name required</span>");
        }
        if(email == "")
        {
            flag =1;
            $("#email_group").append("<span class='error_msg'>Email required</span>");
        }
        if(flag ==0 && emailexits==false )
        {
        $.ajax({
            type:'post',
            url:'/employeeSave',
            data: $('#employee_form').serialize(),
            success:function(data)
            {
                if(data.status=200){
                    fetchRecords();
                    toastr.success(data.message, 'Success Alert', {timeOut: 2000});
                    $("#employee_form")[0].reset();
                    
                }
            }
        })
        }
    });

   
//............get employee details in table.......................
    $(document).on('keyup', '#search', function(){
        var query = $(this).val();
        fetchRecords(query);
    });

    fetchRecords();
    function fetchRecords(query=''){
       $.ajax({
         url: '/getall_employees',
         type: 'get',
         dataType: 'json',
         data:{query:query},//searching value
         success: function(response){

           var len = 0;
           $('#employeeTable tbody').empty(); 

           if(response['data'] != null){
             len = response['data'].length;
           }

           if(len > 0){
             for(var i=0; i<len; i++){
               var id = response['data'][i].id;
               var name = response['data'][i].name;
               var email = response['data'][i].email;
               var status=response['data'][i].status;
       
               var tr_str = "<tr>" +
                   "<td align='center'>" + (i+1) + "</td>" +
                   "<td align='center'>" + name + "</td>" +
                   "<td align='center'>" + email + "</td>" +
                   "<td align='center'><button  value='"+id+"' class='remove-item'>Delete</button> &nbsp <button  value='"+id+"' class='edit-item'>Edit</button></td>" 
            
               $("#employeeTable tbody").append(tr_str);
             }
           }else{
              var tr_str = "<tr>" +
                  "<td align='center' colspan='4'>No record found.</td>" +
              "</tr>";

              $("#employeeTable tbody").append(tr_str);
           }

         }
       });
     }
//.............delete employee................
     $("body").on("click",".remove-item",function(){
        var id = $(this).attr("value");
            $.ajax({
            type:'get',
            url:'/delete_employees/'+id,
            success:function(data){
                if(data.status=200){
                    fetchRecords();
                    toastr.success('deleted succesfully', 'Success Alert', {timeOut: 2000});
                }
            }
        });
    });
//............getting each employee for edit........
    $("body").on("click",".edit-item",function(){
        var id = $(this).attr("value");
        $.ajax({
            type:'get',
            url:'/edit_employee/'+id,
            success:function(data){
                if(data.status=200){
            $('.card-header').html("Update Employee");
            $('#saveBtn').html("Update");
            $('#name').val(data.name);
            $('#email').val(data.email);
            $('#employee_id').val(data.id);
                }
            }
        });
    });
});
//..........check email is already exist..........

$(document).on('keyup', '#email', function(){
    var email = $(this).val();
            $.ajax({
            type:'get',
            url: '/check_email',
            dataType: 'json',
            data:{email:email},
            success:function(data){

            if(data.status==400){
               var emailexits = true;
                $("#email_group").append("<span class='error_msg'>Email already exits</span>");
            }
            else{
                emailexits = false;
                $(".error_msg").remove();
  
            }
            }
        });
    });
</script>

ROUTING
-----------------------------------------------------------------------------------------------------------
1.app/routes/web.php

Route::get('employee', 'employeeController@employee');
Route::post('/employeeSave', 'employeeController@employeeSave');
Route::get('/getall_employees', 'employeeController@getall_employees');
Route::get('delete_employees/{id}', 'employeeController@delete_employees');
Route::get('edit_employee/{id}', 'employeeController@edit_employee');
Route::get('/check_email', 'employeeController@check_email');

CONTROLLER
----------------------------------------------------------------------------------
<?php
namespace App\Http\Controllers;
use Illuminate\Http\Request;
use App\Employee;
use App\District;
use App\Place;
use Validator;
class employeeController extends Controller
{
-------------- employee view --------------------
    public function employee()
    {
        return view('employee');
    }

------------save employee details-------------
    public function employeeSave(Request $request)
    {
        $validator = Validator::make($request->all(), [
            'name'=>'required',
            'email'=>'required',     
        ]);

        if ($validator->fails()) {
            $message = $validator->errors();
            $status = 402;
            $message_type = "warning";
            return response()->json(compact('status', 'message', 'message_type'), 200);
        }else{

        $form_data = array(
            'name'=>$request['name'], 
            'email'=>$request['email'],
            'status' =>1,
        );
        if($request->employee_id){
            $update =  Employee::where('id', $request->employee_id)->update( $form_data);
            if($update){
                $status = 200; 
                $message = 'Employee updated succesfully';
                $message_type = "success";
                return response()->json(compact('status', 'message', 'message_type'), 200);
              }

        }else{
            $create = Employee::create($form_data);
            if($create){
                $status = 200; 
                $message = 'Employee created succesfully';
                $message_type = "success";
                return response()->json(compact('status', 'message', 'message_type'), 200);
            }
        }

      }
    }

   ------------get all employee details based on serach -------------
    public function getall_employees(Request $request)
    {
        if($request->ajax())
         {
            $query = $request->get('query');
            if($query != '')
            {
                $data = Employee::where('name', 'like', '%'.$query.'%')
                ->orWhere('email', 'like', '%'.$query.'%')
                ->orderBy('name', 'desc')
                ->get();
            }
            else
            {
                $data =  Employee::orderBy('name', 'desc')->get();
            }
        $results['data'] = $data;
        return response()->json(  $results,200);
         }
    }
    ------------- delete a specific employee--------
    public function delete_employees($id){
        $data=Employee::where('id',$id)->first();
        if($data){
            $data->delete();
            $status = 200; 
            $message = 'Employee deleted succesfully';
            $message_type = "success";
        } 
       return response()->json(compact( 'status', 'message', 'message_type'), 200); 
    }
    ------------get a specific employee--------------
    public function edit_employee($id)
    {
       $data=Employee::where('id',$id)->first();
       return response()->json( $data,200);
    }
    ----------- check email is existing in table---------
    public function check_email(Request $request)
    {
        $res=Employee::where('email','=',$request->get('email'))->first();
            if ($res === null){
                $status = 200;
                $message = 'New email';
                $message_type = "success";
                return response()->json(compact('status', 'message', 'message_type'), 200);
            }
            else{
                $status = 400;
                $message = 'Email already exists';
                $message_type = "error";
                return response()->json(compact( 'status', 'message', 'message_type'), 200); 
            }
    }

}

MODEL
--------------------------------------------------------------------------------------------------------------

class Employee extends Model
{
    protected $table = 'employees';
    protected $fillable = [
        'name', 'email','status'
    ];
}







